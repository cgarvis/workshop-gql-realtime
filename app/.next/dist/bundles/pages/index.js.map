{"version":3,"sources":["webpack/bootstrap bc002758b37b38c21eff","/Users/jclark/sites/graphql-test/lecture3/app/components/user.js","/Users/jclark/sites/graphql-test/lecture3/app/components/users.js","/Users/jclark/sites/graphql-test/lecture3/app/lib/auth.js","/Users/jclark/sites/graphql-test/lecture3/app/lib/initApollo.js","/Users/jclark/sites/graphql-test/lecture3/app/lib/withData.js","/Users/jclark/sites/graphql-test/lecture3/app/pages/index.js","external \"apollo-boost\"","external \"aws-amplify\"","external \"aws-amplify-react\"","external \"babel-runtime/regenerator\"","external \"graphql-tag\"","external \"isomorphic-unfetch\"","external \"next/head\"","external \"prop-types\"","external \"react\"","external \"react-apollo\"","external \"semantic-ui-react\""],"names":["User","user","username","fragments","map","arr","fn","Users","data","loading","users","items","u","id","usersQuery","enhance","compose","graphql","Amplify","configure","Auth","identityPoolId","region","apolloClient","process","browser","global","fetch","create","initialState","connectToDevTools","ssrMode","link","uri","credentials","headers","cache","restore","initApollo","getComponentDisplayName","Component","displayName","name","ctx","serverState","composedInitialProps","ComposedComponent","getInitialProps","apollo","getDataFromTree","router","asPath","pathname","query","client","Head","rewind","extract","props","React","propTypes","PropTypes","object","Chatty","withAuthenticator"],"mappings":"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","file":"bundles/pages/index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tvar threw = true;\n \t\ttry {\n \t\t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n \t\t\tthrew = false;\n \t\t} finally {\n \t\t\tif(threw) delete installedModules[moduleId];\n \t\t}\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 2);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap bc002758b37b38c21eff","import React from 'react'\nimport gql from 'graphql-tag'\n\nconst User = ({ user }) => (\n  <p> { user.username } </p>\n)\n\nUser.fragments = {\n  User: gql`\n    fragment User on User {\n      username\n      cognitoId\n    }`\n  }\n\nexport default User\n\n\n// WEBPACK FOOTER //\n// ./components/user.js","import React from 'react'\nimport { graphql, compose } from 'react-apollo'\nimport gql from 'graphql-tag'\nimport { Header } from 'semantic-ui-react'\nimport withData from '../lib/withData'\n\nimport User from './user'\n\nconst map = (arr, fn) => arr ? arr.map(fn) : []\n\nconst Users = ({ data: { loading, users = {} } }) => (\n  <div>\n    <Header as=\"h2\">Users</Header>\n    <div>\n      { map(users.items, u => <User key={u.id} user={u} />) }\n    </div>\n  </div>\n)\n\nconst usersQuery = gql`\n  query {\n    users {\n      ...User\n    }\n  }\n  ${User.fragments.User}\n`\n\nconst enhance = compose(\n  withData,\n  graphql(usersQuery)\n)\n\nexport default enhance(Users)\n\n\n\n// WEBPACK FOOTER //\n// ./components/users.js","import Amplify from 'aws-amplify';\n\nAmplify.configure({\n  Auth: {\n    identityPoolId: 'us-east-1:c0bdc293-80ec-40fe-b8ed-ad3bcf2b5d1b',\n    region: 'us-east-1',\n  }\n})\n\nexport default Amplify\n\n\n\n// WEBPACK FOOTER //\n// ./lib/auth.js","import { ApolloClient } from 'apollo-boost'\nimport { HttpLink } from 'apollo-boost'\nimport { InMemoryCache } from 'apollo-boost'\nimport fetch from 'isomorphic-unfetch'\n\nlet apolloClient = null\n\n// Polyfill fetch() on the server (used by apollo-client)\nif (!process.browser) {\n  global.fetch = fetch\n}\n\nfunction create(initialState) {\n  return new ApolloClient({\n    connectToDevTools: process.browser,\n    ssrMode: !process.browser, // Disables forceFetch on the server (so queries are only run once)\n    link: new HttpLink({\n      uri: 'https://qrrc6ud7mbhxredywdkfkgjrpy.appsync-api.us-east-1.amazonaws.com/graphql', // Server URL (must be absolute)\n      credentials: 'same-origin', // Additional fetch() options like `credentials` or `headers`\n      headers: {\n        'x-api-key': 'da2-7qv5g354nbde5d7miqf6dahjqu'\n      }\n    }),\n    cache: new InMemoryCache().restore(initialState || {})\n  })\n}\n\nexport default function initApollo(initialState) {\n  // Make sure to create a new client for every server-side request so that data\n  // isn't shared between connections (which would be bad)\n  if (!process.browser) {\n    return create(initialState)\n  }\n\n  // Reuse client on the client-side\n  if (!apolloClient) {\n    apolloClient = create(initialState)\n  }\n\n  return apolloClient\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/initApollo.js","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { ApolloProvider, getDataFromTree } from 'react-apollo'\nimport Head from 'next/head'\nimport initApollo from './initApollo'\n\n// Gets the display name of a JSX component for dev tools\nfunction getComponentDisplayName(Component) {\n  return Component.displayName || Component.name || 'Unknown'\n}\n\nexport default ComposedComponent => {\n  return class WithData extends React.Component {\n    static displayName = `WithData(${getComponentDisplayName(\n      ComposedComponent\n    )})`\n    static propTypes = {\n      serverState: PropTypes.object\n    }\n\n    static async getInitialProps(ctx) {\n      // Initial serverState with apollo (empty)\n      let serverState\n\n      // Evaluate the composed component's getInitialProps()\n      let composedInitialProps = {}\n      if (ComposedComponent.getInitialProps) {\n        composedInitialProps = await ComposedComponent.getInitialProps(ctx)\n      }\n\n      // Run all GraphQL queries in the component tree\n      // and extract the resulting data\n      const apollo = initApollo()\n      try {\n        // Run all GraphQL queries\n        await getDataFromTree(\n          <ComposedComponent ctx={ctx} {...composedInitialProps} />,\n          {\n            router: {\n              asPath: ctx.asPath,\n              pathname: ctx.pathname,\n              query: ctx.query\n            },\n            client: apollo\n          }\n        )\n      } catch (error) {\n        // Prevent Apollo Client GraphQL errors from crashing SSR.\n        // Handle them in components via the data.error prop:\n        // http://dev.apollodata.com/react/api-queries.html#graphql-query-data-error\n      }\n\n      if (!process.browser) {\n        // getDataFromTree does not call componentWillUnmount\n        // head side effect therefore need to be cleared manually\n        Head.rewind()\n      }\n\n      // Extract query data from the Apollo store\n      serverState = {\n        apollo: {\n          data: apollo.cache.extract()\n        }\n      }\n\n      return {\n        serverState,\n        ...composedInitialProps\n      }\n    }\n\n    constructor(props) {\n      super(props)\n\n      this.apollo = initApollo()\n    }\n\n    render() {\n      return (\n        <ApolloProvider client={this.apollo}>\n          <ComposedComponent {...this.props} />\n        </ApolloProvider>\n      )\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./lib/withData.js","import React from 'react'\nimport { Header } from 'semantic-ui-react'\nimport Users from '../components/users';\nimport Amplify from '../lib/auth';\nimport { withAuthenticator } from 'aws-amplify-react';\n\nconst Chatty = ({ }) => (\n  <div>\n    <Header>Chatty</Header>\n    <Users/>\n  </div>\n)\n\nexport default withAuthenticator(Chatty);\n\n\n\n// WEBPACK FOOTER //\n// ./pages/index.js","module.exports = require(\"apollo-boost\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"apollo-boost\"\n// module id = apollo-boost\n// module chunks = 2","module.exports = require(\"aws-amplify\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"aws-amplify\"\n// module id = aws-amplify\n// module chunks = 2","module.exports = require(\"aws-amplify-react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"aws-amplify-react\"\n// module id = aws-amplify-react\n// module chunks = 2","module.exports = require(\"babel-runtime/regenerator\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-runtime/regenerator\"\n// module id = babel-runtime/regenerator\n// module chunks = 2","module.exports = require(\"graphql-tag\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"graphql-tag\"\n// module id = graphql-tag\n// module chunks = 2","module.exports = require(\"isomorphic-unfetch\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"isomorphic-unfetch\"\n// module id = isomorphic-unfetch\n// module chunks = 2","module.exports = require(\"next/head\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"next/head\"\n// module id = next/head\n// module chunks = 2","module.exports = require(\"prop-types\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"prop-types\"\n// module id = prop-types\n// module chunks = 2","module.exports = require(\"react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react\"\n// module id = react\n// module chunks = 0 2","module.exports = require(\"react-apollo\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"react-apollo\"\n// module id = react-apollo\n// module chunks = 2","module.exports = require(\"semantic-ui-react\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"semantic-ui-react\"\n// module id = semantic-ui-react\n// module chunks = 2"],"sourceRoot":""}